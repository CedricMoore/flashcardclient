<ion-header>
  <ion-toolbar>
    <ion-title>{{ category.title ?? 'نام دسته بندی' }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen="true">

  <div class="flash">
    <div class="flash-card" #flipcard (click)="cardClick()" [style.transform]="'translate(' + deltaX + 'px, 0)'">
      <div class="flash-content" [class.flipped]="flipped">

        <div class="flash-front">
          <!-- <img class="flash-image" [src]="currentCard?.imageUrl" alt="" #cardImg> -->
          <img class="flash-image" [cacheload]="currentCard?.imageUrl" #cardImg>

          <audio [cacheload]="currentCard?.englishVoice" #cardAudio></audio>
          
        </div>

        <div class="flash-back">
          <div [style.opacity]="flipped ? '1' : '0'">
            <h1 class="title">
              {{ currentCard?.englishTitle }}
            </h1>
            <p class="desc">
              {{ currentCard?.translationPersianTitle }}
            </p>
          </div>
        </div>

      </div>
    </div>
  </div>

</ion-content>

<ion-footer>

  <!-- <img [src]="foo" width="50" height="50" style="width: 50px; height: 50px;"> -->

  <div class="panel">

    <div class="navigator">

      <label class="index">
        <span class="current">{{ cardPlace + 1 }}</span>
        <span class="sep">/</span>
        <span>{{ cards?.length }}</span>
      </label>

      <div class="nav">

        <button class="btn-nav left" (click)="next()" [style.visibility]="nextCard ? '' : 'hidden'">
          <ion-icon icon="chevron-forward"></ion-icon>
        </button>

        <div class="dotnav">
          <div class="dot" *ngFor="let card of cards; let i = index" [class.passed]="cardPlace > i"
            [class.active]="cardPlace == i"></div>
        </div>

        <button class="btn-nav forward" (click)="previous()" [style.visibility]="prevCard ? '' : 'hidden'">
          <ion-icon icon="chevron-back"></ion-icon>
        </button>

      </div>

    </div>

    <div class="actions">

      <ion-fab-button size="small" color="secondary" (click)="cardClick()">
        <ion-icon name="repeat"></ion-icon>
      </ion-fab-button>

      <ion-fab-button (click)="cardAudio.play()">
        <ion-icon name="volume-high-outline"></ion-icon>
      </ion-fab-button>

      <ion-fab-button size="small" color="gray" (click)="toggleFav()">
        <ion-icon name="star" [style.color]="currentCard?.isFavorite ? 'gold' : '#cecece'"></ion-icon>
      </ion-fab-button>


    </div>

  </div>

</ion-footer>